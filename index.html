<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
  <title>12 –∑–∞–¥–∞–Ω–∏–µ –û–ì–≠. –†–∞—Å—á—ë—Ç—ã –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --rose:#F9E5EC; --peach:#FFDDB8; --mint:#CFF5E7; --beige:#FFF6E9;
      --accent:#FF9EB2; --accent-2:#8DE6D1; --ink:#8A3A52;
      --shadow:0 10px 28px rgba(218,114,146,.18); --radius:22px;
      --ok:#3CB371; --bad:#E05666;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      font-family:"Nunito", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 600px at 0% 0%, var(--rose), transparent 70%),
        radial-gradient(1000px 600px at 100% 0%, var(--mint), transparent 65%),
        radial-gradient(900px 600px at 100% 100%, var(--peach), transparent 65%),
        var(--beige);
    }
    .wrap{max-width:1000px; margin-inline:auto; padding:clamp(14px,3.2vw,28px); display:grid; gap:16px}
    header{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
    .title{font-family:"Poppins",sans-serif;font-weight:800;letter-spacing:.3px;font-size:clamp(20px,3.2vw,32px)}
    .sub-btn{
      background:linear-gradient(135deg,#FFDDB8,#FF9EB2);
      color:#7a243a; font-weight:800; padding:10px 18px; border-radius:14px;
      text-decoration:none; box-shadow:var(--shadow); transition:.1s ease transform;
    }
    .sub-btn:hover{transform:scale(1.05)}

    /* Tabs */
    .tabs{display:flex; gap:8px; flex-wrap:wrap}
    .tab{
      border:none; cursor:pointer; font-weight:800; color:#7a243a;
      padding:10px 14px; border-radius:999px; background:linear-gradient(135deg,#FFE6F0,#FFF);
      box-shadow:var(--shadow);
    }
    .tab.active{background:linear-gradient(135deg,var(--mint),#e9fff8); color:#255a52}

    .panel{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:clamp(14px,3vw,22px);display:grid;gap:14px}
    .topbar{display:grid;gap:10px;grid-template-columns:1fr auto;align-items:center}
    .progress{height:14px;background:rgba(255,158,178,.25);border-radius:999px;overflow:hidden}
    .progress>i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#FFBFD0);transition:width .5s ease}
    .hearts{font-size:1.6rem}.hearts span{margin-left:4px}.hearts .off{opacity:.25}
    .q-title{font-weight:800;font-size:clamp(18px,2.8vw,26px)}
    .q-body{font-size:clamp(15px,1.9vw,18px);line-height:1.55;white-space:pre-wrap}
    .actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .btn{background:linear-gradient(135deg,var(--mint),var(--accent-2));color:#255a52;font-weight:800;border:none;padding:12px 16px;border-radius:14px;cursor:pointer;transition:.06s transform,.2s filter;box-shadow:var(--shadow);font-size:clamp(14px,1.9vw,16px)}
    .btn:active{transform:translateY(1px) scale(.98)}
    .btn.secondary{background:linear-gradient(135deg,#FFE6C9,#FFD3A3);color:#7a4429}
    .choices{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px}
    .chip{background:#fff;border:2px solid transparent;border-radius:14px;padding:12px;text-align:center;cursor:pointer;font-weight:800;box-shadow:var(--shadow);transition:.2s ease;user-select:none}
    .chip:hover{transform:translateY(-1px)} .chip.sel{border-color:var(--accent);background:linear-gradient(#fff,#FFEFF4)}
    input[type="text"],.display{width:100%;font-size:clamp(16px,2.2vw,20px);padding:12px 14px;border-radius:14px;border:2px solid rgba(138,58,82,.15);outline:none;background:#fff;color:var(--ink);box-shadow:var(--shadow)}
    .display{font-weight:800;text-align:right;letter-spacing:.5px}
    .slider-wrap{display:grid;gap:10px} input[type="range"]{width:100%}
    .kpd{display:grid;grid-template-columns:repeat(3,minmax(64px,1fr));gap:8px}
    .kbtn{background:#fff;border-radius:14px;padding:14px;text-align:center;font-weight:800;box-shadow:var(--shadow);cursor:pointer;user-select:none}
    .drag-area{display:grid;gap:12px}
    .tiles{display:flex;flex-wrap:wrap;gap:10px}
    .tile{padding:10px 14px;background:#fff;border-radius:14px;box-shadow:var(--shadow);font-weight:800;cursor:grab;user-select:none}
    .drop{border:2px dashed rgba(138,58,82,.35);min-height:56px;display:flex;align-items:center;justify-content:center;border-radius:14px;background:rgba(255,255,255,.8)}
    .hint{background:#fff6;border-left:6px solid var(--accent);padding:12px;border-radius:12px;display:none}
    .toast{position:fixed;inset:20px auto auto 50%;transform:translateX(-50%) translateY(-10px);background:#fff;padding:10px 14px;border-radius:12px;color:#8A3A52;font-weight:800;box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:.25s ease;z-index:50}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
    .card.ok{animation:pulse .6s} .card.bad{animation:shake .35s}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(60,179,113,.5)}100%{box-shadow:0 0 0 18px rgba(60,179,113,0)}}
    @keyframes shake{10%,90%{transform:translateX(-1px)}20%,80%{transform:translateX(2px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}
    .confetti{position:fixed;top:-10px;width:10px;height:14px;opacity:.95;transform:rotate(15deg);border-radius:3px;z-index:60;animation:fall 1.6s linear forwards}
    @keyframes fall{to{transform:translateY(110vh) rotate(360deg);opacity:1}}
    .overlay{position:fixed;inset:0;display:grid;place-items:center;background:rgba(255,245,247,.85);z-index:40;backdrop-filter:blur(4px);padding:20px}
    .hidden{display:none}
    .footer{text-align:center;opacity:.7;font-size:.9rem}

    /* Intro illustration block */
    .intro-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px;align-items:center}
    @media (max-width:820px){.intro-grid{grid-template-columns:1fr}}
    .lead{font-size:clamp(16px,2vw,18px);line-height:1.6}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="title">üìò 12 –∑–∞–¥–∞–Ω–∏–µ –û–ì–≠. –†–∞—Å—á—ë—Ç—ã –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º</div>
    <a class="sub-btn" href="https://t.me/YourChannelHere" target="_blank" rel="noopener">–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Å—è üì≤</a>
  </header>

  <!-- Tabs -->
  <div class="tabs">
    <button class="tab active" data-tab="intro">–í–≤–µ–¥–µ–Ω–∏–µ</button>
    <button class="tab" data-tab="game">–¢—Ä–µ–Ω–∞–∂—ë—Ä</button>
  </div>

  <!-- Intro panel -->
  <section id="intro" class="panel">
    <div class="intro-grid">
      <div>
        <h2 class="q-title">–û —á—ë–º —ç—Ç–∏ –∑–∞–¥–∞–Ω–∏—è?</h2>
        <p class="lead">
          –ó–¥–µ—Å—å –∏–¥—ë—Ç —Å–∞–º—ã–π –æ–±—ã—á–Ω—ã–π <b>–ø–æ–¥—Å—á—ë—Ç –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º</b>. –ù–∏–∫–∞–∫—É—é —Å–ª–æ–∂–Ω—É—é —Ç–µ–æ—Ä–∏—é –∑–Ω–∞—Ç—å –Ω–µ –Ω–∞–¥–æ ‚Äî
          –ø—Ä–æ—Å—Ç–æ <b>–ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—à—å —á–∏—Å–ª–∞ –∏ —Å—á–∏—Ç–∞–µ—à—å</b>. –ö–∞–∫ –Ω–∞ —Ñ–∏–∑–∏–∫–µ, —Ç–æ–ª—å–∫–æ –µ—â—ë –ø—Ä–æ—â–µ:
          <b>—Ñ–æ—Ä–º—É–ª—ã –∏–∑–≤–µ—Å—Ç–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ!</b>
        </p>
        <p class="lead">
          –ü—Ä–æ–π–¥–∏ –≤—Å–µ –∑–∞–¥–∞—á–∏ ‚Äî –∏ <b>–±–∞–ª–ª –ø–æ –û–ì–≠ —É —Ç–µ–±—è –≤ –∫–∞—Ä–º–∞–Ω–µ!</b> –ù–∞–∂–∏–º–∞–π ¬´–¢—Ä–µ–Ω–∞–∂—ë—Ä¬ª, –≤—ã–±–∏—Ä–∞–π –æ—Ç–≤–µ—Ç—ã,
          –∏—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –∑–∞–∫—Ä–µ–ø–ª—è–π –Ω–∞–≤—ã–∫.
        </p>
        <div class="actions">
          <button id="startBtn" class="btn">–ù–∞—á–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</button>
          <a class="btn secondary" href="https://t.me/YourChannelHere" target="_blank" rel="noopener">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª</a>
        </div>
      </div>

      <!-- Cute inline SVG illustration -->
      <div aria-hidden="true">
        <svg viewBox="0 0 440 300" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#FFE6F0"/>
              <stop offset="1" stop-color="#E7FFF7"/>
            </linearGradient>
            <linearGradient id="g2" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#FFB3C5"/>
              <stop offset="1" stop-color="#FFD6A6"/>
            </linearGradient>
          </defs>
          <rect x="0" y="0" width="440" height="300" rx="24" fill="url(#g1)"/>
          <!-- notebook -->
          <rect x="40" y="40" width="210" height="220" rx="16" fill="#fff" stroke="#f3c0cc" stroke-width="3"/>
          <line x1="60" y1="80" x2="230" y2="80" stroke="#ffd1db" stroke-width="6" stroke-linecap="round"/>
          <line x1="60" y1="112" x2="230" y2="112" stroke="#ffd1db" stroke-width="6" stroke-linecap="round"/>
          <line x1="60" y1="144" x2="230" y2="144" stroke="#ffd1db" stroke-width="6" stroke-linecap="round"/>
          <line x1="60" y1="176" x2="200" y2="176" stroke="#ffd1db" stroke-width="6" stroke-linecap="round"/>
          <!-- calculator -->
          <rect x="270" y="60" width="120" height="180" rx="18" fill="url(#g2)"/>
          <rect x="285" y="75" width="90" height="36" rx="8" fill="#fff" opacity=".9"/>
          <g fill="#fff">
            <rect x="285" y="120" width="26" height="26" rx="6"/>
            <rect x="317" y="120" width="26" height="26" rx="6"/>
            <rect x="349" y="120" width="26" height="26" rx="6"/>
            <rect x="285" y="152" width="26" height="26" rx="6"/>
            <rect x="317" y="152" width="26" height="26" rx="6"/>
            <rect x="349" y="152" width="26" height="26" rx="6"/>
            <rect x="285" y="184" width="26" height="26" rx="6"/>
            <rect x="317" y="184" width="26" height="26" rx="6"/>
            <rect x="349" y="184" width="26" height="26" rx="6"/>
          </g>
          <!-- formula bubble -->
          <g>
            <rect x="120" y="200" width="160" height="60" rx="14" fill="#fff" stroke="#c1efe2" stroke-width="3"/>
            <text x="200" y="236" text-anchor="middle" font-family="Poppins, Nunito, sans-serif" font-weight="700" font-size="18" fill="#6a2a3e">P = m g h</text>
          </g>
        </svg>
      </div>
    </div>
  </section>

  <!-- Game panel -->
  <section id="game" class="panel hidden">
    <div class="topbar">
      <div class="progress" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å"><i id="bar"></i></div>
      <div class="hearts" aria-label="–ñ–∏–∑–Ω–∏"><span id="h1">‚ù§Ô∏è</span><span id="h2">‚ù§Ô∏è</span><span id="h3">‚ù§Ô∏è</span></div>
    </div>

    <div class="card panel" id="card">
      <div class="q-title" id="qTitle">–ó–∞–¥–∞–Ω–∏–µ 1</div>
      <div class="q-body" id="qBody"></div>
      <div id="interactive"></div>
      <div class="actions">
        <button class="btn" id="checkBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <button class="btn secondary" id="hintBtn">–ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
      </div>
      <div class="hint" id="hintBox"></div>
      <div class="small" id="note"></div>
    </div>
  </section>

  <div class="footer">–ü–æ–¥—Å–∫–∞–∑–∫–∏ ‚Äî –ø—Ä–æ—Å—Ç—ã–º —à–∫–æ–ª—å–Ω—ã–º —è–∑—ã–∫–æ–º. –ó–∞–ø—è—Ç—É—é –º–æ–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å ¬´,¬ª –∏–ª–∏ ¬´.¬ª</div>
</div>

<div class="toast" id="toast">–£—Ä–∞!</div>
<div class="overlay hidden" id="gameOver">
  <div class="panel" style="max-width:560px">
    <div class="q-title">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</div>
    <div class="q-body" id="overText">–í—ã –º–æ–ª–æ–¥–µ—Ü!</div>
    <div class="actions"><button class="btn" id="againBtn">–°—ã–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button></div>
  </div>
</div>

<script>
  // ---------- helpers ----------
  const $ = (s, p=document)=>p.querySelector(s);
  const $$ = (s, p=document)=>[...p.querySelectorAll(s)];
  const parseNum = v => parseFloat(String(v??'').replace(',', '.').replace(/\s/g,''));
  const within = (x, target, tol=1e-3)=> Math.abs(parseNum(x) - target) <= tol;

  const toast = (msg)=>{ const t=$('#toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1200) }
  const confetti=()=>{const c=["#FF9EB2","#FFDDB8","#CFF5E7","#B1E3FF","#E6C2FF"];for(let i=0;i<24;i++){const s=document.createElement('span');s.className='confetti';s.style.left=Math.random()*100+'vw';s.style.background=c[(Math.random()*c.length)|0];s.style.animationDuration=(1.2+Math.random()*0.8)+'s';document.body.appendChild(s);setTimeout(()=>s.remove(),1800)}}

  // ---------- tabs ----------
  const tabBtns = $$('.tab');
  const panels = { intro: $('#intro'), game: $('#game') };
  function showTab(name){
    tabBtns.forEach(b=>b.classList.toggle('active', b.dataset.tab===name));
    Object.keys(panels).forEach(k=>panels[k].classList.toggle('hidden', k!==name));
    if(name==='game'){ setTimeout(()=> panels.game.scrollIntoView({behavior:'smooth', block:'start'}), 0); }
  }
  tabBtns.forEach(b=> b.addEventListener('click', ()=> showTab(b.dataset.tab)));
  $('#startBtn').addEventListener('click', ()=> showTab('game'));

  // ---------- tasks: –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ ----------
  const tasks = [
    {
      id:1, type:'choice',
      title:'–ó–∞–¥–∞–Ω–∏–µ 1.',
      body:'–í —Ñ–∏—Ä–º–µ ¬´–†–æ–¥–Ω–∏–∫¬ª —Å—Ç–æ–∏–º–æ—Å—Ç—å (–≤ —Ä—É–±–ª—è—Ö) –∫–æ–ª–æ–¥—Ü–∞ –∏–∑ –∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã—Ö –∫–æ–ª–µ—Ü —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ C = 6000 + 4100¬∑n, –≥–¥–µ n ‚Äì —á–∏—Å–ª–æ –∫–æ–ª–µ—Ü, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏ —Ä—ã—Ç—å–µ –∫–æ–ª–æ–¥—Ü–∞. –ü–æ–ª—å–∑—É—è—Å—å —ç—Ç–æ–π —Ñ–æ—Ä–º—É–ª–æ–π, —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ–ª–æ–¥—Ü–∞ –∏–∑ 7 –∫–æ–ª–µ—Ü.',
      options:[34700, 34100, 32000, 28700], answer:34700, unit:'‚ÇΩ',
      hint:'–ü–æ–¥—Å—Ç–∞–≤—å n=7: 6000 + 4100¬∑7 = 6000 + 28700 = 34700.'
    },
    {
      id:2, type:'input',
      title:'–ó–∞–¥–∞–Ω–∏–µ 2.',
      body:'–ß—Ç–æ–±—ã –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ø–æ —à–∫–∞–ª–µ –¶–µ–ª—å—Å–∏—è –≤ —à–∫–∞–ª—É –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞, –ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–æ—Ä–º—É–ª–æ–π t_F = 1,8 t_C + 32, –≥–¥–µ t_C ‚Äì –≥—Ä–∞–¥—É—Å—ã –¶–µ–ª—å—Å–∏—è, t_F ‚Äì –≥—Ä–∞–¥—É—Å—ã –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞. –°–∫–æ–ª—å–∫–∏–º –≥—Ä–∞–¥—É—Å–∞–º –ø–æ —à–∫–∞–ª–µ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç ‚àí45 –≥—Ä–∞–¥—É—Å–æ–≤ –ø–æ —à–∫–∞–ª–µ –¶–µ–ª—å—Å–∏—è?',
      answer:-49, tol:0.2, placeholder:'–û—Ç–≤–µ—Ç –≤ ¬∞F',
      hint:'t_F = 1,8¬∑(‚àí45) + 32 = ‚àí81 + 32 = ‚àí49.'
    },
    {
      id:3, type:'slider',
      title:'–ó–∞–¥–∞–Ω–∏–µ 3.',
      body:'–ß—Ç–æ–±—ã –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ø–æ —à–∫–∞–ª–µ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞ –≤ —à–∫–∞–ª—É –¶–µ–ª—å—Å–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–æ—Ä–º—É–ª–∞ t_C = 5/9 (t_F ‚àí 32), –≥–¥–µ t_C ‚Äì —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –¶–µ–ª—å—Å–∏—è, t_F ‚Äì —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞. –°–∫–æ–ª—å–∫–∏–º –≥—Ä–∞–¥—É—Å–∞–º –ø–æ —à–∫–∞–ª–µ –¶–µ–ª—å—Å–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç 113 –≥—Ä–∞–¥—É—Å–æ–≤ –ø–æ —à–∫–∞–ª–µ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞?',
      min:40, max:60, step:0.1, answer:45, tol:0.3, unit:'¬∞C',
      hint:'t_C = 5/9¬∑(113 ‚àí 32) = 5/9¬∑81 = 45.'
    },
    {
      id:4, type:'drag',
      title:'–ó–∞–¥–∞–Ω–∏–µ 4.',
      body:'–°–∏–ª–∞ –ê—Ä—Ö–∏–º–µ–¥–∞, –≤—ã—Ç–∞–ª–∫–∏–≤–∞—é—â–∞—è –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –ø–æ–≥—Ä—É–∂—ë–Ω–Ω–æ–µ –≤ –≤–æ–¥—É —Ç–µ–ª–æ, –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ F = œÅ g V, –≥–¥–µ œÅ = 1000 –∫–≥/–º^3 ‚Äì –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –≤–æ–¥—ã, g = 9,8 –º/—Å^2 ‚Äì —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è, –∞ V ‚Äì –æ–±—ä—ë–º —Ç–µ–ª–∞ –≤ –∫—É–±–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∞—Ö. –°–∏–ª–∞ F –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ –Ω—å—é—Ç–æ–Ω–∞—Ö. –ù–∞–π–¥–∏—Ç–µ —Å–∏–ª—É –ê—Ä—Ö–∏–º–µ–¥–∞, –¥–µ–π—Å—Ç–≤—É—é—â—É—é –Ω–∞ –ø–æ–≥—Ä—É–∂—ë–Ω–Ω–æ–µ –≤ –≤–æ–¥—É —Ç–µ–ª–æ –æ–±—ä—ë–º–æ–º 0,6 –∫—É–±. –º. –û—Ç–≤–µ—Ç –¥–∞–π—Ç–µ –≤ –Ω—å—é—Ç–æ–Ω–∞—Ö.',
      tiles:[5880, 980, 600, 1000], answer:5880,
      hint:'F = 1000 ¬∑ 9,8 ¬∑ 0,6 = 5880 –ù.'
    },
    {
      id:5, type:'input',
      title:'–ó–∞–¥–∞–Ω–∏–µ 5.',
      body:'–ï—Å–ª–∏ —Ç–µ–ª–æ –º–∞—Å—Å–æ–π m –∫–≥ –ø–æ–¥–≤–µ—à–µ–Ω–æ –Ω–∞ –≤—ã—Å–æ—Ç–µ h –º –Ω–∞–¥ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å—é –∑–µ–º–ª–∏, —Ç–æ –µ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è –≤ –¥–∂–æ—É–ª—è—Ö –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ P = mgh, g = 9,8 –º/—Å^2 ‚Äì —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è. –ù–∞–π–¥–∏—Ç–µ –º–∞—Å—Å—É —Ç–µ–ª–∞, –ø–æ–¥–≤–µ—à–µ–Ω–Ω–æ–≥–æ –Ω–∞ –≤—ã—Å–æ—Ç–µ 4 –º –Ω–∞–¥ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å—é –∑–µ–º–ª–∏, –µ—Å–ª–∏ –µ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è —Ä–∞–≤–Ω–∞ 1176 –¥–∂–æ—É–ª—è–º. –û—Ç–≤–µ—Ç –¥–∞–π—Ç–µ –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö.',
      answer:30, tol:0.05, placeholder:'–∫–≥',
      hint:'m = P/(gh) = 1176 / (9,8¬∑4) = 30.'
    },
    {
      id:6, type:'choice',
      title:'–ó–∞–¥–∞–Ω–∏–µ 6.',
      body:'–≠–Ω–µ—Ä–≥–∏—è –∑–∞—Ä—è–∂–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ W (–≤ –¥–∂–æ—É–ª—è—Ö) –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ W = CU^2 / 2, –≥–¥–µ C ‚Äì —ë–º–∫–æ—Å—Ç—å –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ (–≤ —Ñ–∞—Ä–∞–¥–∞—Ö), –∞ U ‚Äì —Ä–∞–∑–Ω–æ—Å—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–≤ –Ω–∞ –æ–±–∫–ª–∞–¥–∫–∞—Ö –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ (–≤ –≤–æ–ª—å—Ç–∞—Ö). –ù–∞–π–¥–∏—Ç–µ —ç–Ω–µ—Ä–≥–∏—é –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ —ë–º–∫–æ—Å—Ç—å—é 10^-4 —Ñ–∞—Ä–∞–¥, –µ—Å–ª–∏ —Ä–∞–∑–Ω–æ—Å—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–≤ –Ω–∞ –æ–±–∫–ª–∞–¥–∫–∞—Ö –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ —Ä–∞–≤–Ω–∞ 22 –≤–æ–ª—å—Ç. –û—Ç–≤–µ—Ç –¥–∞–π—Ç–µ –≤ –¥–∂–æ—É–ª—è—Ö.',
      options:[0.0242, 0.242, 24.2, 0.00242], answer:0.0242, unit:'–î–∂',
      hint:'0,5 ¬∑ 10^-4 ¬∑ 22^2 = 0,0242 –î–∂.'
    },
    {
      id:7, type:'keypad',
      title:'–ó–∞–¥–∞–Ω–∏–µ 7.',
      body:'–ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è —Ç–µ–ª–∞ –º–∞—Å—Å–æ–π m –∫–≥, –¥–≤–∏–≥–∞—é—â–µ–≥–æ—Å—è —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é v –º/—Å, –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ E = mv^2 / 2 –∏ –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ –¥–∂–æ—É–ª—è—Ö (–î–∂). –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—å –º–∞—Å—Å–æ–π 2500 –∫–≥ –æ–±–ª–∞–¥–∞–µ—Ç –∫–∏–Ω–µ—Ç–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π 45 —Ç—ã—Å—è—á –¥–∂–æ—É–ª–µ–π. –ù–∞–π–¥–∏—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å —ç—Ç–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –≤ –º–µ—Ç—Ä–∞—Ö –≤ —Å–µ–∫—É–Ω–¥—É.',
      answer:6, tol:0.01, unit:'–º/—Å',
      hint:'v = ‚àö(2E/m) = ‚àö(90000/2500) = ‚àö36 = 6 –º/—Å.'
    },
    {
      id:8, type:'stepper',
      title:'–ó–∞–¥–∞–Ω–∏–µ 8.',
      body:'–ú–æ—â–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ç–æ–∫–∞ (–≤ –≤–∞—Ç—Ç–∞—Ö) –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ P = I^2 R, –≥–¥–µ I ‚Äì —Å–∏–ª–∞ —Ç–æ–∫–∞ (–≤ –∞–º–ø–µ—Ä–∞—Ö), R ‚Äì —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ (–≤ –æ–º–∞—Ö). –ü–æ–ª—å–∑—É—è—Å—å —ç—Ç–æ–π —Ñ–æ—Ä–º—É–ª–æ–π, –Ω–∞–π–¥–∏—Ç–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ R, –µ—Å–ª–∏ –º–æ—â–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 101,25 –í—Ç, –∞ —Å–∏–ª–∞ —Ç–æ–∫–∞ —Ä–∞–≤–Ω–∞ 4,5 –ê. –û—Ç–≤–µ—Ç –¥–∞–π—Ç–µ –≤ –æ–º–∞—Ö.',
      start:3.5, step:0.5, answer:5, tol:0.01, unit:'Œ©',
      hint:'R = P / I^2 = 101,25 / 4,5^2 = 5 –û–º.'
    },
    {
      id:9, type:'choice',
      title:'–ó–∞–¥–∞–Ω–∏–µ 9.',
      body:'–¶–µ–Ω—Ç—Ä–æ—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ (–≤ –º/—Å^2) –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –ø–æ —Ñ–æ—Ä–º—É–ª–µ a = œâ^2 R, –≥–¥–µ œâ ‚Äì —É–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (–≤ —Å^-1), –∞ R ‚Äì —Ä–∞–¥–∏—É—Å –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏. –ü–æ–ª—å–∑—É—è—Å—å —ç—Ç–æ–π —Ñ–æ—Ä–º—É–ª–æ–π, –Ω–∞–π–¥–∏—Ç–µ —Ä–∞–¥–∏—É—Å R (–≤ –º–µ—Ç—Ä–∞—Ö), –µ—Å–ª–∏ —É–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–≤–Ω–∞ 7,5 —Å^-1, –∞ —Ü–µ–Ω—Ç—Ä–æ—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ 337,5 –º/—Å^2. –û—Ç–≤–µ—Ç –¥–∞–π—Ç–µ –≤ –º–µ—Ç—Ä–∞—Ö.',
      options:[6, 4.5, 7.5, 9], answer:6, unit:'–º',
      hint:'R = a / œâ^2 = 337,5 / 7,5^2 = 6 –º.'
    },
    {
      id:10, type:'slider',
      title:'–ó–∞–¥–∞–Ω–∏–µ 10.',
      body:'–ü–ª–æ—â–∞–¥—å —á–µ—Ç—ã—Ä—ë—Ö—É–≥–æ–ª—å–Ω–∏–∫–∞ –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –ø–æ —Ñ–æ—Ä–º—É–ª–µ S = d1 d2 sin Œ± / 2, –≥–¥–µ d1 –∏ d2 ‚Äì –¥–ª–∏–Ω—ã –¥–∏–∞–≥–æ–Ω–∞–ª–µ–π —á–µ—Ç—ã—Ä—ë—Ö—É–≥–æ–ª—å–Ω–∏–∫–∞, Œ± ‚Äì —É–≥–æ–ª –º–µ–∂–¥—É –¥–∏–∞–≥–æ–Ω–∞–ª—è–º–∏. –ü–æ–ª—å–∑—É—è—Å—å —ç—Ç–æ–π —Ñ–æ—Ä–º—É–ª–æ–π, –Ω–∞–π–¥–∏—Ç–µ –¥–ª–∏–Ω—É –¥–∏–∞–≥–æ–Ω–∞–ª–∏ d2, –µ—Å–ª–∏ d1 = 12, sin Œ± = 7/9, –∞ S = 46,2.',
      min:7, max:13, step:0.1, answer:9.9, tol:0.1, unit:'–µ–¥.',
      hint:'S=(d1¬∑d2¬∑sinŒ±)/2 = (12¬∑d2¬∑7/9)/2 ‚áí d2 = 46,2 √∑ (14/3) = 9,9.'
    }
  ];

  // ---------- state ----------
  let idx=0, lives=3;
  const bar=$('#bar'), card=$('#card'), qTitle=$('#qTitle'), qBody=$('#qBody'), zone=$('#interactive'), hintBox=$('#hintBox');

  const renderHearts=()=>['#h1','#h2','#h3'].forEach((sel,i)=>$(sel).classList.toggle('off', i>=lives));
  const setProgress=()=>bar.style.width=(idx/tasks.length*100)+'%';

  // ---------- render ----------
  function renderTask(){
    setProgress(); renderHearts();
    const t=tasks[idx];
    qTitle.textContent=t.title;

    // –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–∞–∫ –µ—Å—Ç—å (–±–µ–∑ HTML –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π)
    qBody.textContent='';
    qBody.append(document.createTextNode(t.body));

    hintBox.style.display='none';
    hintBox.textContent=t.hint||'';
    zone.innerHTML='';

    if(t.type==='choice'){
      const wrap=document.createElement('div'); wrap.className='choices';
      t.options.forEach(v=>{
        const b=document.createElement('button'); b.type='button'; b.className='chip';
        b.textContent=`${v}${t.unit?' '+t.unit:''}`;
        b.addEventListener('click',()=>{
          $$('.chip',wrap).forEach(x=>x.classList.remove('sel'));
          b.classList.add('sel'); zone.dataset.val=v;
        });
        wrap.appendChild(b);
      });
      zone.appendChild(wrap);
    }

    if(t.type==='input'){
      const input=document.createElement('input');
      input.type='text'; input.inputMode='decimal'; input.placeholder=t.placeholder||'–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ';
      input.addEventListener('keydown',e=>{ if(e.key==='Enter') check() });
      zone.appendChild(input);
    }

    if(t.type==='slider'){
      const wrap=document.createElement('div'); wrap.className='slider-wrap';
      const out=document.createElement('div'); out.className='display';
      const rng=document.createElement('input'); rng.type='range'; rng.min=t.min; rng.max=t.max; rng.step=t.step; rng.value=(t.min+t.max)/2;
      zone.dataset.val=rng.value; out.textContent=`${rng.value}${t.unit?' '+t.unit:''}`;
      rng.addEventListener('input',()=>{ zone.dataset.val=rng.value; out.textContent=`${rng.value}${t.unit?' '+t.unit:''}` });
      wrap.append(out, rng); zone.appendChild(wrap);
    }

    if(t.type==='drag'){
      const wrap=document.createElement('div'); wrap.className='drag-area';
      const drop=document.createElement('div'); drop.className='drop'; drop.textContent='–ü–µ—Ä–µ—Ç–∞—â–∏/–∫–ª–∏–∫–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—é–¥–∞';
      drop.addEventListener('dragover',e=>e.preventDefault());
      drop.addEventListener('drop',e=>{ e.preventDefault(); const v=e.dataTransfer.getData('text'); zone.dataset.val=v; drop.textContent=v; drop.style.borderColor='var(--accent)'; });

      const tiles=document.createElement('div'); tiles.className='tiles';
      t.tiles.forEach(v=>{
        const el=document.createElement('div'); el.className='tile'; el.draggable=true; el.textContent=v;
        el.addEventListener('dragstart',e=>e.dataTransfer.setData('text/plain', v));
        el.addEventListener('click',()=>{ zone.dataset.val=v; drop.textContent=v; drop.style.borderColor='var(--accent)'; });
        tiles.appendChild(el);
      });

      wrap.append(tiles, drop); zone.appendChild(wrap);
    }

    if(t.type==='keypad'){
      const out=document.createElement('div'); out.className='display'; out.textContent='';
      const k=document.createElement('div'); k.className='kpd'; zone.dataset.val='';
      const keys=['7','8','9','4','5','6','1','2','3','0','.',',','‚å´','C','OK'];
      keys.forEach(sym=>{
        const b=document.createElement('div'); b.className='kbtn'; b.textContent=sym;
        b.addEventListener('click',()=>{
          let cur=zone.dataset.val||'';
          if(sym==='C'){ cur=''; }
          else if(sym==='‚å´'){ cur=cur.slice(0,-1); }
          else if(sym==='OK'){ check(); return; }
          else { cur+=sym; }
          zone.dataset.val=cur; out.textContent=cur;
        });
        k.appendChild(b);
      });
      zone.append(out, k);
    }

    if(t.type==='stepper'){
      const out=document.createElement('div'); out.className='display';
      let v=t.start??0; zone.dataset.val=v; out.textContent=v+(t.unit?' '+t.unit:'');
      const group=document.createElement('div'); group.className='actions';
      const minus=document.createElement('button'); minus.className='btn ghost'; minus.textContent='‚àí';
      const plus=document.createElement('button'); plus.className='btn ghost'; plus.textContent='+';
      const step=t.step||1; const snap=x=>Math.round(x*1000)/1000;
      minus.addEventListener('click',()=>{ v=snap(v-step); zone.dataset.val=v; out.textContent=v+(t.unit?' '+t.unit:'') });
      plus .addEventListener('click',()=>{ v=snap(v+step); zone.dataset.val=v; out.textContent=v+(t.unit?' '+t.unit:'') });
      group.append(minus, plus); zone.append(out, group);
    }
  }

  // ---------- check ----------
  function check(){
    const t=tasks[idx];
    let val=null;
    if(['choice','slider','drag','keypad','stepper'].includes(t.type)) val=parseNum(zone.dataset.val);
    if(t.type==='input') val=parseNum($('input',zone).value);

    if(Number.isNaN(val)){ toast('–í–≤–µ–¥–∏/–≤—ã–±–µ—Ä–∏ –æ—Ç–≤–µ—Ç üòä'); return; }

    const ok=within(val, t.answer, t.tol??0.001);
    card.classList.remove('ok','bad'); void card.offsetWidth;

    if(ok){
      card.classList.add('ok'); toast('–í–µ—Ä–Ω–æ! –¢—ã —É–º–Ω–∏—á–∫–∞ ‚ú®'); confetti(); idx++;
      if(idx>=tasks.length) setTimeout(()=>win(),650); else setTimeout(()=>renderTask(),650);
    }else{
      card.classList.add('bad'); lives=Math.max(0, lives-1); renderHearts(); toast('–ù–µ —Å–æ–≤—Å–µ–º‚Ä¶ –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë!');
      if(lives===0) setTimeout(()=>gameOver(),550);
    }
  }

  // ---------- end states ----------
  function win(){ $('#overText').innerHTML=`–í—Å–µ <b>${tasks.length}</b> –∑–∞–¥–∞—á —Ä–µ—à–µ–Ω—ã! üèÜ`; $('#gameOver').classList.remove('hidden') }
  function gameOver(){ $('#overText').innerHTML=`–ñ–∏–∑–Ω–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å. –ü—Ä–æ–≥—Ä–µ—Å—Å: <b>${idx}/${tasks.length}</b>.`; $('#gameOver').classList.remove('hidden') }
  function restart(){ idx=0; lives=3; $('#gameOver').classList.add('hidden'); renderTask(); }

  // ---------- events ----------
  $('#hintBtn').addEventListener('click',()=>{ const hb=$('#hintBox'); hb.style.display=hb.style.display==='block'?'none':'block' });
  $('#checkBtn').addEventListener('click',check);
  $('#againBtn').addEventListener('click',restart);

  // start on Intro; game renders on first show
  renderTask(); // –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –∏–≥—Ä—É –∑–∞—Ä–∞–Ω–µ–µ
</script>
</body>
</html>
